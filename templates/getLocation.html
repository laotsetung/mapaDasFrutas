<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mapa Das Frutas - getLocation</title>
</head>
<body>
    <form action="/index" method="POST">

        <input type="hidden" name="lat" id="lat">
        <input type="hidden" name="lon" id="lon">
    </form>

    <script>
        function showPosition(position) {
            const lat = position.coords.latitude
            const lon = position.coords.longitude
            document.getElementById('lat').value = lat
            document.getElementById('lon').value = lon

            localStorage.setItem("lat",position.coords.latitude)
            localStorage.setItem("lon",position.coords.longitude)

            //window.location.href = "/index/"+lat+"/"+lon
            document.forms[0].submit()
        }

        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(showPosition);
        } else {
            x.innerHTML = "Geolocation is not supported by this browser.";
        }
        
    </script>   

    
</body>
</html>